# ===============================
# üåê Environment URLs & Variables
# ===============================

@localUrl = http://localhost:3000
@prodUrl = https://express-prisma-z4x3.onrender.com
@baseUrl = {{localUrl}}   # Switch to {{prodUrl}} for Render
@token =
@postId =
@tagId =

# ===============================
# üìù REGISTER NEW USER
# ===============================

POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "name": "New User",
  "email": "newuser@example.com",
  "password": "password123"
}

# ===============================
# üîë LOGIN
# ===============================

POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "admin@example.com",
  "password": "admin123"
}

# Save JWT token from login response
# @token = {{response.body.token}}

# ===============================
# üìÑ GET ALL POSTS
# ===============================

GET {{baseUrl}}/posts
Authorization: Bearer {{token}}

# ===============================
# üè∑ CREATE NEW TAG
# ===============================

POST {{baseUrl}}/tags
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Frontend"
}

# Save created tag ID
# @tagId = {{response.body.id}}

# ===============================
# ‚úèÔ∏è CREATE NEW POST
# ===============================

POST {{baseUrl}}/posts
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "title": "Dynamic REST Client Test Post",
  "content": "This post content is long enough to pass validation.",
  "published": true,
  "tagIds": ["{{tagId}}"]
}

# Save created post ID
# @postId = {{response.body.id}}

# ===============================
# üí¨ CREATE NEW COMMENT
# ===============================

POST {{baseUrl}}/comments
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "content": "This is a dynamic test comment",
  "postId": "{{postId}}"
}

# ===============================
# üóë DELETE POST
# ===============================

DELETE {{baseUrl}}/posts/{{postId}}
Authorization: Bearer {{token}}

# ===============================
# üè∑ GET ALL TAGS
# ===============================

GET {{baseUrl}}/tags
Authorization: Bearer {{token}}

# ===============================
# üí¨ GET ALL COMMENTS
# ===============================

GET {{baseUrl}}/comments
Authorization: Bearer {{token}}
